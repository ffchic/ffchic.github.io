<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#4e72b8"><meta name="author" content="天 听"><meta name="copyright" content="天 听"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>gin-vue搭建个人博客-8 | Salmon</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.22/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_ed8vp4atwoj.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link id="light-prism-css" rel="stylesheet" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism-solarizedlight.css" media="(prefers-color-scheme: dark)"><link rel="shortcut icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#4e72b8"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"godhearing.cn","root":"/","title":["天","听","の","blog"],"version":"1.4.0","mode":"auto","copycode":true,"page":{"isPost":true},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"/data/sentences.json"},"local_search":{"path":"/search.xml"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="alternate" href="/atom.xml" title="Salmon" type="application/atom+xml"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap"><meta name="description" content="编辑新增等功能 使用ant-design的组件，关于引入和使用就不说了，把UserList.vue完整的代码放出来供大家参考，一些必要的地方也已经写好了注释，大部分代码都是重复的。和之前的有些许改变。后台也可以按照自己喜欢的风格来做。  &lt;template&gt; 	&lt;div&gt; 		&lt;a-card&gt; 			&lt;a-row :gutter&#x3D;&quot;20&quot;&gt;">
<meta property="og:type" content="article">
<meta property="og:title" content="gin-vue搭建个人博客-8">
<meta property="og:url" content="https://godhearing.cn/posts/26339/index.html">
<meta property="og:site_name" content="Salmon">
<meta property="og:description" content="编辑新增等功能 使用ant-design的组件，关于引入和使用就不说了，把UserList.vue完整的代码放出来供大家参考，一些必要的地方也已经写好了注释，大部分代码都是重复的。和之前的有些许改变。后台也可以按照自己喜欢的风格来做。  &lt;template&gt; 	&lt;div&gt; 		&lt;a-card&gt; 			&lt;a-row :gutter&#x3D;&quot;20&quot;&gt;">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-07-16T06:32:07.242Z">
<meta property="article:modified_time" content="2021-07-16T09:56:57.814Z">
<meta property="article:author" content="天 听">
<meta property="article:tag" content="Golang">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary"><script src="/js/ui/mode.js"></script>
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="stylesheet" href="/css/prism-solarizedlight.css" type="text/css"></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><canvas id="trianglifyContainer"></canvas><script defer src="https://cdn.jsdelivr.net/npm/trianglify@4/dist/trianglify.bundle.js"></script><script>document.addEventListener("DOMContentLoaded", () => {
  const pattern = trianglify({
    width: 800,
    height: 600,
    cellSize: 65,
    palette: ["YlGnBu", "GnBu", "Purples", "Blues","Reds","Oranges"],
  });
  const canvasOpts = {
    applyCssScaling: false
  }
  document.body.appendChild(pattern.toCanvas(trianglifyContainer, canvasOpts));
});</script><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info mickey-mouse"><a class="site-author-avatar" href="/about/" title="天 听"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="天 听"><span class="site-author-status" title="明天，只是一个希望，不是一个承诺">😊</span></a><div class="site-author-name"><a href="/about/">天 听</a></div><a class="site-name" href="/about/site.html">Salmon</a><sub class="site-subtitle">天听的站点</sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">115</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">24</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">39</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://www.baidu.com/" title="通向一个万事都能解决的地方"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/God-hearing2020" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=247102977" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/godhearing1" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://haoye0822@gmail.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a><a class="links-item hty-icon-button" href="/girls/" title="我最喜欢的明星" style="color:hotpink"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-women-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E6%96%B0%E5%A2%9E%E7%AD%89%E5%8A%9F%E8%83%BD"><span class="toc-number">1.</span> <span class="toc-text">编辑新增等功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E5%92%8C%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E9%A1%B5"><span class="toc-number">2.</span> <span class="toc-text">分类和文章列表页</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#components-article-ArtList-vue"><span class="toc-number">2.1.</span> <span class="toc-text">components&#x2F;article&#x2F;ArtList.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#components-category-CateList-vue"><span class="toc-number">2.2.</span> <span class="toc-text">components&#x2F;category&#x2F;CateList.vue</span></a></li></ol></li></ol></div></div></div><div class="tag-cloud"><div class="tag-cloud-tags"><a href="/tags/Book/" style="font-size: 21px; color: #80b45d">Book</a> <a href="/tags/Casbin/" style="font-size: 12px; color: #ffc20e">Casbin</a> <a href="/tags/Celery/" style="font-size: 16.5px; color: #bfbb36">Celery</a> <a href="/tags/Django/" style="font-size: 30px; color: #00a6ac">Django</a> <a href="/tags/Docker/" style="font-size: 25.5px; color: #40ad85">Docker</a></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://godhearing.cn/posts/26339/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="天 听"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Salmon"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">gin-vue搭建个人博客-8</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="Created: 2021-07-16 14:32:07" itemprop="dateCreated datePublished" datetime="2021-07-16T14:32:07+08:00">2021-07-16</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/Golang/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">Golang</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/tags/Golang/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Golang</span></a><a class="tag" href="/tags/Vue/" style="--text-color:#4fc08d"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Vue</span></a></span></div><div class="post-author"><span class="author-name">天听</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#4e72b8;"><h2 id="编辑新增等功能"><a href="#编辑新增等功能" class="headerlink" title="编辑新增等功能"></a>编辑新增等功能</h2><blockquote>
<p>使用ant-design的组件，关于引入和使用就不说了，把UserList.vue完整的代码放出来供大家参考，一些必要的地方也已经写好了注释，大部分代码都是重复的。和之前的有些许改变。后台也可以按照自己喜欢的风格来做。</p>
</blockquote>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">&lt;template&gt;
	&lt;div&gt;
		&lt;a-card&gt;
			&lt;a-row :gutter="20"&gt;
				&lt;a-col :span="6"&gt;
					&lt;a-input-search 
					v-model="queryParam.username"
					allowClear placeholder="请输入用户名" 
					enter-button 
					@search="getUserList" /&gt;
				&lt;/a-col&gt;
				&lt;a-col :span="4"&gt;
					&lt;a-button type="primary" @click="AddUserVisible = true"&gt;新增&lt;/a-button&gt;
				&lt;/a-col&gt;
			&lt;/a-row&gt;
			&lt;a-table
				:columns='columns' 
				rowKey='ID'
				:pagination="pagination"
				:dataSource="userlist"
				bordered
				@change="handleTableChange"
			&gt;
			&lt;span slot="role" slot-scope="role"&gt;{{role == 1 ? "管理员":"订阅者"}}&lt;/span&gt;
			&lt;template slot="action" slot-scope="data"&gt;
				&lt;div class="actionSlot"&gt;
				&lt;a-button type="info" icon="info" style="margin-right:15px" @click="ChangePassword(data.ID)"&gt;修改密码&lt;/a-button&gt;
				&lt;a-button type="primary" icon="edit" style="margin-right:15px" @click="editUser(data.ID)"&gt;编辑&lt;/a-button&gt;
				&lt;a-popconfirm title="确认删除？删除后无法恢复" ok-text="确认" cancel-text="取消" @confirm="delUser(data.ID)"&gt;
				  &lt;a-button icon="delete" type="danger"&gt;删除&lt;/a-button&gt;
				&lt;/a-popconfirm&gt;
			&lt;/div&gt;
			&lt;/template&gt;
			&lt;/a-table&gt;
		&lt;/a-card&gt;
		
		&lt;!-- 新增用户对话框 --&gt;
		&lt;a-modal
      title="新增用户"
      :visible="AddUserVisible"
      @ok="AddUserOk"
      @cancel="addUserCanal"
			closable
    &gt;
      &lt;a-form-model :model="userinfo" :rules="userRules" ref="addUserRef"&gt;
				&lt;a-form-model-item label="用户名" prop="username"&gt;
					&lt;a-input v-model="userinfo.username"&gt;&lt;/a-input&gt;
				&lt;/a-form-model-item&gt;
				&lt;a-form-model-item label="密码" prop="password"&gt;
					&lt;a-input-password v-model="userinfo.password"&gt;

					&lt;/a-input-password&gt;
				&lt;/a-form-model-item&gt;
				&lt;a-form-model-item label="确认密码" prop="checkpass"&gt;
					&lt;a-input-password v-model="userinfo.checkpass"&gt;

					&lt;/a-input-password&gt;
				&lt;/a-form-model-item&gt;
				
			&lt;/a-form-model&gt;
    &lt;/a-modal&gt;

		&lt;!-- 编辑用户 --&gt;
		&lt;a-modal
      title="编辑用户"
      :visible="editUserVisible"
      @ok="editUserOk"
			width="60%"
      @cancel="editUserCanal"
			closable
    &gt;
      &lt;a-form-model :model="userinfo" :rules="userRules" ref="addUserRef"&gt;
				&lt;a-form-model-item label="用户名" prop="username"&gt;
					&lt;a-input v-model="userinfo.username"&gt;&lt;/a-input&gt;
				&lt;/a-form-model-item&gt;

				&lt;a-form-model-item label="是否为管理员"&gt;
          &lt;a-switch
            :checked="IsAdmin"
            checked-children="是"
            un-checked-children="否"
            @change="adminChange"
          /&gt;
        &lt;/a-form-model-item&gt;
				
			&lt;/a-form-model&gt;
    &lt;/a-modal&gt;

		&lt;!-- 编辑密码 --&gt;
		&lt;a-modal
      closable
      title="修改密码"
      :visible="changePasswordVisible"
      width="60%"
      @ok="changePasswordOk"
      @cancel="changePasswordCancel"
      destroyOnClose
    &gt;
      &lt;a-form-model :model="userinfo" :rules="userRules" ref="addUserRef"&gt;
        &lt;a-form-model-item has-feedback label="密码" prop="password"&gt;
          &lt;a-input-password v-model="userinfo.password"&gt;&lt;/a-input-password&gt;
        &lt;/a-form-model-item&gt;
        &lt;a-form-model-item has-feedback label="确认密码" prop="checkpass"&gt;
          &lt;a-input-password v-model="userinfo.checkpass"&gt;&lt;/a-input-password&gt;
        &lt;/a-form-model-item&gt;
      &lt;/a-form-model&gt;
    &lt;/a-modal&gt;

	&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
const columns = [
	{
    title: 'ID',
    dataIndex: 'ID',
    key: 'id',
    width: '10%',
		align:'center'
  },
	{
    title: '用户名',
    dataIndex: 'username',
    key: 'username',
    width: '20%',
		align:'center'
  },
	{
    title: '角色',
    dataIndex: 'role',
    key: 'role',
    width: '20%',
		scopedSlots:{customRender:'role'},
		align:'center'
  },
	{
    title: '操作',
    key: 'action',
    width: '30%',
		scopedSlots:{customRender:'action'},
		align:'center'
  },
]
export default {
	data(){
		return{
			columns,
			changePasswordVisible: false,
			// 分页
			pagination: {
        pageSizeOptions: ['5', '10', '20'],
        pageSize: 5,
        total: 0,
        showSizeChanger: true,
        showTotal: (total) =&gt; `共${total}条`,
      },
			queryParam: {
				username:'',
        pagesize: 5,
        pagenum: 1,
      },
			userlist:[],
			AddUserVisible:false,
			editUserVisible:false,
			userinfo:{
				id:0,
				username:'',
				password:'',
				checkpass:'',
				role:2
			},
			userRules:{
				username: [
          {
            validator: (rule, value, callback) =&gt; {
              if (this.userinfo.username == '') {
                callback(new Error('请输入用户名'))
              }
              if ([...this.userinfo.username].length &lt; 4 || [...this.userinfo.username].length &gt; 12) {
                callback(new Error('用户名应当在4到12个字符之间'))
              } else {
                callback()
              }
            },
            trigger: 'blur',
          },
        ],
        password: [
          {
            validator: (rule, value, callback) =&gt; {
              if (this.userinfo.password == '') {
                callback(new Error('请输入密码'))
              }
              if ([...this.userinfo.password].length &lt; 6 || [...this.userinfo.password].length &gt; 20) {
                callback(new Error('密码应当在6到20位之间'))
              } else {
                callback()
              }
            },
            trigger: 'blur',
          },
        ],
				checkpass: [
          {
            validator: (rule, value, callback) =&gt; {
              if (this.userinfo.checkpass == '') {
                callback(new Error('请输入密码'))
              }
              if (this.userinfo.password !== this.userinfo.checkpass) {
                callback(new Error('密码不一致，请重新输入'))
              } else {
                callback()
              }
            },
            trigger: 'blur',
          },
        ],



			},
		}
	},
	created(){
		this.getUserList()
	},
	computed: {
		// 加载前布尔判断
    IsAdmin: function () {
      if (this.userinfo.role === 1) {
        return true
      } else {
        return false
      }
    }
	},
	methods:{
		// 查询用户
		async getUserList(){
			const { data:res } = await this.$http.get('api/v1/user/', {
				params:{
					username: this.queryParam.username,
					size: this.queryParam.pagesize,
					page: this.queryParam.pagenum,
					},
				})
			if(res.code != 200)return this.$message.error(res.msg)
			this.userlist = res.data
			this.pagination.total = res.total
		},
		// 分页
		handleTableChange(pagination, filters, sorter) {
      var pager = { ...this.pagination }
      pager.current = pagination.current
      pager.pageSize = pagination.pageSize
      this.queryParam.pagesize = pagination.pageSize
      this.queryParam.pagenum = pagination.current

      if (pagination.pageSize !== this.pagination.pageSize) {
        this.queryParam.pagenum = 1
        pager.current = 1
      }
      this.pagination = pager
      this.getUserList()
    },
		// 删除用户
		async delUser(id){
		  const { data: res } = await this.$http.delete(`api/admin/user/${id}/`)
			if(res.code != 200)return this.$message.error(res.msg)
			this.queryParam.pagenum = 1
			this.$message.success('删除成功')
			this.getUserList()
		},

		AddUserOk(){
			this.$refs.addUserRef.validate(async (vaild)=&gt;{
				if(!vaild)return this.$message.error("格式不正确")
				const { data: res } = await this.$http.post("api/v1/user/",{
					"username":this.userinfo.username,
					"password":this.userinfo.password,
					"role": this.userinfo.role,
					})
				if (res.code != 200) return this.$message.error(res.msg)
				// 清空搜索框
				this.$refs.addUserRef.resetFields()
				// 关闭弹窗
        this.AddUserVisible = false
        this.$message.success('添加用户成功')
        this.getUserList()
			})
		},
		// role布尔值判断
		adminChange(checked){
      if (checked) {
        this.userinfo.role = 1
      } else {
        this.userinfo.role = 2
      }
		},
		// 取消的方法
		addUserCanal(){
			this.$refs.addUserRef.resetFields()
			this.AddUserVisible = false
		},
		// 编辑框获取用户信息
		async editUser(id){
			this.editUserVisible = true
			const {data: res } = await this.$http.get(`/api/v1/user/${id}/`)
			this.userinfo = res.data
			this.userinfo.id = id
		},
		// 编辑用户
		editUserOk(){
			this.$refs.addUserRef.validate(async (vaild)=&gt;{
				if(!vaild)return this.$message.error("格式不正确")
				const { data: res } = await this.$http.put(`/api/admin/user/${this.userinfo.id}/`,{
					"username":this.userinfo.username,
					"role": this.userinfo.role,
					})
				if (res.code != 200) return this.$message.error(res.msg)
				// 清空搜索框
				this.$refs.addUserRef.resetFields()
				// 关闭弹窗
        this.editUserVisible = false
        this.$message.success('编辑用户成功')
        this.getUserList()
			})
		},
		// 取消编辑销毁数据
		editUserCanal(){
			this.$refs.addUserRef.resetFields()
			this.editUserVisible = false
		},
		// 修改密码获取信息
		ChangePassword(id){
			this.changePasswordVisible = true
      this.userinfo.id = id
		},
		// 修改密码
		changePasswordOk() {
      this.$refs.addUserRef.validate(async (valid) =&gt; {
        if (!valid) return this.$message.error('参数不符合要求，请重新输入')
        const { data: res } = await this.$http.put(`/api/admin/editpass/${this.userinfo.id}/`,{
				"password":this.userinfo.password
			})
        if (res.code != 200) return this.$message.error(res.msg)
        this.changePasswordVisible = false
        this.$message.success('修改密码成功')
        this.getUserList()
      })
    },
		// 修改密码取消
		changePasswordCancel() {
      this.$refs.addUserRef.resetFields()
      this.changePasswordVisible = false
      this.$message.info('已取消')
    },


	}

}
&lt;/script&gt;

&lt;style&gt;
.actionSlot{
	display: flex;
	justify-content: center;
}

&lt;/style&gt;</code></pre>

<h2 id="分类和文章列表页"><a href="#分类和文章列表页" class="headerlink" title="分类和文章列表页"></a>分类和文章列表页</h2><blockquote>
<p>CV大法好，只是在后端新增了一个搜索文章的功能。和搜索用户也是一样的啦。</p>
</blockquote>
<p><code>model/Article.go</code></p>
<pre class="language-go" data-language="go"><code class="language-go">// SearchArticle 搜索文章标题
func SearchArticle(title string, pageSize int, pageNum int) ([]Article, int, int64) {
	var articleList []Article
	var err error
	var total int64
	err = Db.Select("article.id,title, img, created_at, updated_at, `desc`, comment_count, read_count, category.name").Limit(pageSize).Offset((pageNum-1)*pageSize).Order("Created_At DESC").Joins("Category").Where("title LIKE ?",
		title+"%",
	).Find(&amp;articleList).Error
	// 单独计数
	Db.Model(&amp;articleList).Count(&amp;total)

	if err != nil {
		return nil, errmsg.ERROR, 0
	}
	return articleList, errmsg.SUCCSE, total
}</code></pre>

<p><code>/api/v1/article.go</code></p>
<pre class="language-go" data-language="go"><code class="language-go">// 查询文章列表
func GetArticles(c *gin.Context)  {
	// 字符串转int
	Size,_ := strconv.Atoi(c.DefaultQuery("size","3"))
	Page,_ := strconv.Atoi(c.DefaultQuery("page","1"))
	title := c.Query("title")
	if len(title) == 0 {
		data, code, total := model.GetArticles(Size, Page)
		c.JSON(http.StatusOK, gin.H{
			"code":  code,
			"msg":   errmsg.GetErrorMsg(code),
			"data":  data,
			"total": total,
		})
		return
	}
	data, code, total := model.SearchArticle(title,Size,Page)
	c.JSON(http.StatusOK, gin.H{
		"code":  code,
		"data":    data,
		"total":   total,
		"msg": errmsg.GetErrorMsg(code),
	})

}</code></pre>

<p>前端页面也放一下代码，闭着眼复制就可以了。</p>
<h3 id="components-article-ArtList-vue"><a href="#components-article-ArtList-vue" class="headerlink" title="components/article/ArtList.vue"></a><code>components/article/ArtList.vue</code></h3><pre class="language-javascript" data-language="javascript"><code class="language-javascript">&lt;template&gt;
  &lt;div&gt;
    &lt;a-card&gt;
      &lt;a-row :gutter="20"&gt;
        &lt;a-col :span="6"&gt;
          &lt;a-input-search
            v-model="queryParam.title"
            placeholder="输入文章名查找"
            enter-button
            allowClear
            @search="getArtList"
          /&gt;
        &lt;/a-col&gt;
        &lt;a-col :span="4"&gt;
          &lt;a-button type="primary" @click="$router.push('addart')"&gt;新增&lt;/a-button&gt;
        &lt;/a-col&gt;

        &lt;a-col :span="3"&gt;
          &lt;a-select placeholder="请选择分类" style="width: 200px" @change="CateChange"&gt;
            &lt;a-select-option
              v-for="item in Catelist"
              :key="item.id"
              :value="item.id"
            &gt;{{ item.name }}&lt;/a-select-option&gt;
          &lt;/a-select&gt;
        &lt;/a-col&gt;
        &lt;a-col :span="1"&gt;
          &lt;a-button type="info" @click="getArtList()"&gt;显示全部&lt;/a-button&gt;
        &lt;/a-col&gt;
      &lt;/a-row&gt;

      &lt;a-table
        rowKey="ID"
        :columns="columns"
        :pagination="pagination"
        :dataSource="Artlist"
        bordered
        @change="handleTableChange"
      &gt;
        &lt;span class="ArtImg" slot="img" slot-scope="img"&gt;
          &lt;img :src="img" /&gt;
        &lt;/span&gt;
        &lt;template slot="action" slot-scope="data"&gt;
          &lt;div class="actionSlot"&gt;
            &lt;a-button
              size="small"
              type="primary"
              icon="edit"
              style="margin-right: 15px"
              @click="$router.push(`addart/${data.ID}`)"
            &gt;编辑&lt;/a-button&gt;
						&lt;a-popconfirm title="确认删除？删除后无法恢复" ok-text="确认" cancel-text="取消" @confirm="deleteArt(data.ID)"&gt;
				  		&lt;a-button icon="delete" size="small" type="danger"&gt;删除&lt;/a-button&gt;
						&lt;/a-popconfirm&gt;
          &lt;/div&gt;
        &lt;/template&gt;
      &lt;/a-table&gt;
    &lt;/a-card&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import day from 'dayjs'

const columns = [
  {
    title: 'ID',
    dataIndex: 'ID',
    width: '5%',
    key: 'id',
    align: 'center',
  },
  {
    title: '更新日期',
    dataIndex: 'UpdatedAt',
    width: '10%',
    key: 'UpdatedAt',
    align: 'center',
    customRender: (val) =&gt; {
      return val ? day(val).format('YYYY年MM月DD日 HH:mm') : '暂无'
    },
  },
  {
    title: '分类',
    dataIndex: 'Category.name',
    width: '5%',
    key: 'name',
    align: 'center',
  },
  {
    title: '文章标题',
    dataIndex: 'title',
    width: '15%',
    key: 'title',
    align: 'center',
  },
  {
    title: '文章描述',
    dataIndex: 'desc',
    width: '20%',
    key: 'desc',
    align: 'center',
  },
  {
    title: '缩略图',
    dataIndex: 'img',
    width: '20%',
    key: 'img',
    align: 'center',
    scopedSlots: { customRender: 'img' },
  },
  {
    title: '操作',
    width: '15%',
    key: 'action',
    align: 'center',
    scopedSlots: { customRender: 'action' },
  },
]

export default {
  data() {
    return {
      pagination: {
        pageSizeOptions: ['5', '10', '20'],
        pageSize: 5,
        total: 0,
        showSizeChanger: true,
        showTotal: (total) =&gt; `共${total}条`,
      },
      Artlist: [],
      Catelist: [],
      columns,
      queryParam: {
        title: '',
        pagesize: 5,
        pagenum: 1,
      },
    }
  },
  created() {
		this.getCateList()
    this.getArtList()
  },
  methods: {
    // 获取文章列表
    async getArtList() {
      const { data: res } = await this.$http.get('api/v1/article/', {
        params: {
          title: this.queryParam.title,
          size: this.queryParam.pagesize,
          page: this.queryParam.pagenum,
        },
      })
      if (res.code !== 200) {
        if (res.code === 1004 || 1005 || 1006 || 1007) {
          window.sessionStorage.clear()
          this.$router.push('/login')
        }
        this.$message.error(res.message)
      }

      this.Artlist = res.data
      this.pagination.total = res.total
    },
    // 获取分类
    async getCateList() {
      const { data: res } = await this.$http.get('api/v1/category/',{params: {
          size: 100,
          page: 1,
        },})
      if (res.code !== 200) return this.$message.error(res.msg)
      this.Catelist = res.data
      this.pagination.total = res.total
    },
    // 更改分页
    handleTableChange(pagination, filters, sorter) {
      var pager = { ...this.pagination }
      pager.current = pagination.current
      pager.pageSize = pagination.pageSize
      this.queryParam.pagesize = pagination.pageSize
      this.queryParam.pagenum = pagination.current

      if (pagination.pageSize !== this.pagination.pageSize) {
        this.queryParam.pagenum = 1
        pager.current = 1
      }
      this.pagination = pager
      this.getArtList()
    },
    // 删除文章
    async deleteArt(id) {
			const { data: res } = await this.$http.delete(`api/admin/article/${id}/`)
			if (res.code != 200) return this.$message.error(res.msg)
			this.$message.success('删除成功')
			this.queryParam.pagenum = 1
			this.getArtList()

    },
    // 查询分类下的文章
    CateChange(value) {
      this.getCateArt(value)
    },
    async getCateArt(id) {
      const { data: res } = await this.$http.get(`api/v1/catelist/${id}/`, {
        params: { size: this.queryParam.pagesize, page: this.queryParam.pagenum },
      })
      if (res.code !== 200) return this.$message.error(res.msg)
      this.Artlist = res.data
      this.pagination.total = res.total
    },
  },
}
&lt;/script&gt;

&lt;style scoped&gt;
.actionSlot {
  display: flex;
  justify-content: center;
}
.ArtImg {
  height: 100%;
  width: 100%;
}

.ArtImg img {
  width: 100px;
  height: 80px;
}
&lt;/style&gt;
</code></pre>

<h3 id="components-category-CateList-vue"><a href="#components-category-CateList-vue" class="headerlink" title="components/category/CateList.vue"></a><code>components/category/CateList.vue</code></h3><pre class="language-javascript" data-language="javascript"><code class="language-javascript">&lt;template&gt;
	&lt;div&gt;
		&lt;a-card&gt;
			&lt;a-row :gutter="20"&gt;
				&lt;a-col :span="4"&gt;
					&lt;a-button type="primary" @click="AddcateVisible = true"&gt;新增分类&lt;/a-button&gt;
				&lt;/a-col&gt;
			&lt;/a-row&gt;
			&lt;a-table
				:columns='columns' 
				rowKey='id'
				:pagination="pagination"
				:dataSource="catelist"
				bordered
				@change="handleTableChange"
			&gt;
			&lt;template slot="action" slot-scope="data"&gt;
				&lt;div class="actionSlot"&gt;
				&lt;a-button type="primary" icon="edit" style="margin-right:15px" @click="editcate(data.id)"&gt;编辑&lt;/a-button&gt;
				&lt;a-popconfirm title="确认删除？删除后无法恢复" ok-text="确认" cancel-text="取消" @confirm="delcate(data.id)"&gt;
				  &lt;a-button icon="delete" type="danger"&gt;删除&lt;/a-button&gt;
				&lt;/a-popconfirm&gt;
			&lt;/div&gt;
			&lt;/template&gt;
			&lt;/a-table&gt;
		&lt;/a-card&gt;
		
		&lt;!-- 新增分类对话框 --&gt;
		&lt;a-modal
      title="新增分类"
      :visible="AddcateVisible"
      @ok="AddcateOk"
      @cancel="addcateCanal"
			closable
    &gt;
      &lt;a-form-model :model="cateinfo" ref="addcateRef"&gt;
				&lt;a-form-model-item label="分类名" prop="name"&gt;
					&lt;a-input v-model="cateinfo.name"&gt;&lt;/a-input&gt;
				&lt;/a-form-model-item&gt;
			&lt;/a-form-model&gt;
    &lt;/a-modal&gt;

		&lt;!-- 编辑分类 --&gt;
		&lt;a-modal
      title="编辑分类"
      :visible="editcateVisible"
      @ok="editcateOk"
			width="60%"
      @cancel="editcateCanal"
			closable
    &gt;
      &lt;a-form-model :model="cateinfo" ref="addcateRef"&gt;
				&lt;a-form-model-item label="分类名" prop="name"&gt;
					&lt;a-input v-model="cateinfo.name"&gt;&lt;/a-input&gt;
				&lt;/a-form-model-item&gt;
				
			&lt;/a-form-model&gt;
    &lt;/a-modal&gt;
	&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
const columns = [
	{
    title: 'ID',
    dataIndex: 'id',
    key: 'id',
    width: '10%',
		align:'center'
  },
	{
    title: '分类名',
    dataIndex: 'name',
    key: 'name',
    width: '20%',
		align:'center'
  },
	{
    title: '操作',
    key: 'action',
    width: '30%',
		scopedSlots:{customRender:'action'},
		align:'center'
  },
]
export default {
	data(){
		return{
			columns,
			changePasswordVisible: false,
			// 分页
			pagination: {
        pageSizeOptions: ['5', '10', '20'],
        pageSize: 5,
        total: 0,
        showSizeChanger: true,
        showTotal: (total) =&gt; `共${total}条`,
      },
			queryParam: {
				name:'',
        pagesize: 5,
        pagenum: 1,
      },
			catelist:[],
			AddcateVisible:false,
			editcateVisible:false,
			cateinfo:{
				id:0,
				name:'',
			},
		}
	},
	created(){
		this.getcateList()
	},
	methods:{
		// 查询分类
		async getcateList(){
			const { data:res } = await this.$http.get('api/v1/category/', {
				params:{
					size: this.queryParam.pagesize,
					page: this.queryParam.pagenum,
					},
				})
			if(res.code != 200)return this.$message.error(res.msg)
			this.catelist = res.data
			this.pagination.total = res.total
		},
		// 分页
		handleTableChange(pagination, filters, sorter) {
      var pager = { ...this.pagination }
      pager.current = pagination.current
      pager.pageSize = pagination.pageSize
      this.queryParam.pagesize = pagination.pageSize
      this.queryParam.pagenum = pagination.current

      if (pagination.pageSize !== this.pagination.pageSize) {
        this.queryParam.pagenum = 1
        pager.current = 1
      }
      this.pagination = pager
      this.getcateList()
    },
		// 删除分类
		async delcate(id){
		  const { data: res } = await this.$http.delete(`api/admin/category/${id}/`)
			if(res.code != 200)return this.$message.error(res.msg)
			this.$message.success('删除成功')
			this.queryParam.pagenum = 1
			this.getcateList()
		},

		async AddcateOk(){
				const { data: res } = await this.$http.post("api/admin/category/",{
					"name":this.cateinfo.name,
					})
				if (res.code != 200) return this.$message.error(res.msg)
				// 清空搜索框
				this.$refs.addcateRef.resetFields()
				// 关闭弹窗
        this.AddcateVisible = false
        this.$message.success('添加成功')
        this.getcateList()
		},
		// 取消的方法
		addcateCanal(){
			this.$refs.addcateRef.resetFields()
			this.AddcateVisible = false
		},
		// 编辑框获取分类信息
		async editcate(id){
			this.editcateVisible = true
			const {data: res } = await this.$http.get(`/api/v1/category/${id}/`)
			this.cateinfo = res.data
			this.cateinfo.id = id
		},
		// 编辑分类
		async editcateOk(){
				const { data: res } = await this.$http.put(`/api/admin/category/${this.cateinfo.id}/`,{
					"name":this.cateinfo.name,
					})
				if (res.code != 200) return this.$message.error(res.msg)
				// 清空搜索框
				this.$refs.addcateRef.resetFields()
				// 关闭弹窗
        this.editcateVisible = false
        this.$message.success('编辑成功')
        this.getcateList()
		},
		// 取消编辑销毁数据
		editcateCanal(){
			this.$refs.addcateRef.resetFields()
			this.editcateVisible = false
		},
	}

}
&lt;/script&gt;

&lt;style&gt;
.actionSlot{
	display: flex;
	justify-content: center;
}

&lt;/style&gt;</code></pre>

</div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>天听</li><li class="post-copyright-link"><strong>Post link: </strong><a href="https://godhearing.cn/posts/26339/" title="gin-vue搭建个人博客-8">https://godhearing.cn/posts/26339/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> unless otherwise stated.</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/posts/42530/" rel="prev" title="gin-vue搭建个人博客-9"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">gin-vue搭建个人博客-9</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/posts/25251/" rel="next" title="gin-vue搭建个人博客-7"><span class="post-nav-text">gin-vue搭建个人博客-7</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">冀ICP备2021002475号-1</a></div><div class="copyright"><span>&copy; 2017 – 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 天 听</span></div><div class="powered"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v5.4.0</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.4.0</span></div><div class="live_time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2017-07-12T00:00:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#4e72b8" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="Search"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="开始面向搜索引擎编程" value=""></div><div id="local-search-result"></div></div></div></body></html>