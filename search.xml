<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>gin-vue搭建个人博客-10</title>
      <link href="2021/07/23/gin-vue-da-jian-ge-ren-bo-ke-10/"/>
      <url>2021/07/23/gin-vue-da-jian-ge-ren-bo-ke-10/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote><p>后台页面写完，剩下的就是前端了，不过通过一个<a href="https://github.com/Groundhog-Chen/vue-material-admin">项目</a>发现了一个前端很好用的ui(ps:后悔用ant design了)，官方地址<a href="https://vuetifyjs.com/zh-Hans/getting-started/installation/#vue-cli-5b8988c5">在这</a>，<del>鬼知道我能写成什么样子</del></p></blockquote><p>创建好项目之后，直接使用<code>vue add vuetify</code>添加即可。</p><p>然后打开主页，看到主页已经成了这样，就是成功了。</p><img src="/2021/07/23/gin-vue-da-jian-ge-ren-bo-ke-10/image-20210723181229364.png" alt style="zoom:50%;"><p>由于这个ui框架学起来有一定难度，在文档上即使有示例也不能像ant design这种开封即用，关于这个，还是需要一定的学习成本。不说了，先自闭一会儿。</p><p>N天后…</p><p>到此，推荐大家自己摸索，作为前端黑洞，我已经尽我所能了。<del>我就是懒啊</del></p>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gin-vue搭建个人博客-9</title>
      <link href="2021/07/19/gin-vue-da-jian-ge-ren-bo-ke-9/"/>
      <url>2021/07/19/gin-vue-da-jian-ge-ren-bo-ke-9/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote><p>关于接口调用和页面的各种调优，都不必按部就班的按照这个样子来写。本来就是个小项目，作为一个前端菜鸟，我也在前进的路上，望知悉。</p></blockquote><h2 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h2><blockquote><p>用来写文章的编辑器，写博客，我们都是使用的markdown，由于对前端的不熟悉，只能胡乱选一个。最终使用的是tinymce，文档<a href="http://tinymce.ax-z.cn/">在这</a>，这不是官方的。</p><p>⚠️！这是富文本编辑器，下面还有markdown编辑器， 两个都放出来了，可以按照个人喜好选择。</p></blockquote><ol><li><p>下载包<br> <a href="https://www.tiny.cloud/get-tiny/self-hosted/">网址</a>，从这里把<code>Download TinyMCE Community</code>下载下来，然后再下载一个<a href="https://www.tiny.cloud/get-tiny/language-packages/">语言包</a>，下载Chinese，不用说了</p></li><li><p>把tinymcew下的langs删了，替换成下载好的语言包，在couponents下新建一个文件夹<code>editor</code>，把这个文件夹放进去。</p></li><li><p>在editor下新建组件<code>index.vue</code></p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>Editor <span class="token punctuation">:</span>init<span class="token operator">=</span><span class="token string">"init"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Editor<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">import</span> Editor <span class="token keyword">from</span> <span class="token string">'@tinymce/tinymce-vue'</span><span class="token keyword">import</span> <span class="token string">'./tinymce.min.js'</span><span class="token keyword">import</span> <span class="token string">'./icons/default/icons.min.js'</span><span class="token keyword">import</span> <span class="token string">'./themes/silver/theme.min.js'</span><span class="token keyword">import</span> <span class="token string">'./langs/zh_CN'</span><span class="token comment" spellcheck="true">// 注册插件</span><span class="token keyword">import</span> <span class="token string">'./plugins/preview/plugin.min.js'</span><span class="token keyword">import</span> <span class="token string">'./plugins/paste/plugin.min.js'</span><span class="token keyword">import</span> <span class="token string">'./plugins/wordcount/plugin.min.js'</span><span class="token keyword">import</span> <span class="token string">'./plugins/code/plugin.min.js'</span><span class="token keyword">import</span> <span class="token string">'./plugins/image/plugin.min.js'</span><span class="token keyword">import</span> <span class="token string">'./plugins/imagetools/plugin.min.js'</span><span class="token keyword">import</span> <span class="token string">'./plugins/media/plugin.min.js'</span><span class="token keyword">import</span> <span class="token string">'./plugins/codesample/plugin.min.js'</span><span class="token keyword">import</span> <span class="token string">'./plugins/lists/plugin.min.js'</span><span class="token keyword">import</span> <span class="token string">'./plugins/table/plugin.min.js'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  components<span class="token punctuation">:</span> <span class="token punctuation">{</span>Editor<span class="token punctuation">}</span><span class="token punctuation">,</span>  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>    value<span class="token punctuation">:</span> <span class="token punctuation">{</span>      type<span class="token punctuation">:</span> String<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      init<span class="token punctuation">:</span> <span class="token punctuation">{</span>        language<span class="token punctuation">:</span> <span class="token string">'zh_CN'</span><span class="token punctuation">,</span>        height<span class="token punctuation">:</span> <span class="token string">'600px'</span><span class="token punctuation">,</span>        plugins<span class="token punctuation">:</span> <span class="token string">'preview paste wordcount code imagetools image media codesample lists table'</span><span class="token punctuation">,</span>        branding<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        paste_data_images<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        toolbar<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token string">'undo redo | styleselect |fontsizeselect| bold italic underline strikethrough |alignleft aligncenter alignright alignjustify |blockquote removeformat |numlist bullist table'</span><span class="token punctuation">,</span><span class="token string">'preview paste code codesample |image media'</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">//上传图片</span>        images_upload_handler<span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>blobInfo<span class="token punctuation">,</span> succFun<span class="token punctuation">,</span> failFun<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token keyword">let</span> formdata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          formdata<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">,</span> blobInfo<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> blobInfo<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'api/admin/upload/'</span><span class="token punctuation">,</span> formdata<span class="token punctuation">)</span>          <span class="token function">succFun</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8081/'</span><span class="token operator">+</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>          <span class="token function">failFun</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'上传图片失败'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        imagetools_cors_hosts<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'*'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        imagetools_proxy<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      content<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token function">value</span><span class="token punctuation">(</span>newV<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> newV    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">content</span><span class="token punctuation">(</span>newV<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> newV<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style scoped<span class="token operator">></span>@<span class="token keyword">import</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'./skins/ui/oxide/skin.min.css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>@<span class="token keyword">import</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token string">'./skins/content/default/content.min.css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre></li></ol><p>在写完了富文本之后，我发现我搞错了一点。博客当然是要用markdown啊😭，我本以为没有markdown编辑器的，哎，怪我认知不好。于是在一顿搜罗之后，我找到了一个巨好用的markdown编辑器。<a href="https://github.com/hinesboy/mavonEditor">网址</a></p><pre><code>npm install mavon-editor --save</code></pre><p>直接安装，安装完成之后，直接全局引入。在main.js中。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> mavonEditor <span class="token keyword">from</span> <span class="token string">"mavon-editor"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">"mavon-editor/dist/css/index.css"</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>mavonEditor<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>然后直接使用，github上提供了他很多方法，这里我们直接引用。再根据需要，修改一下上传文件的方法。就大功告成。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>card<span class="token operator">></span>            <span class="token operator">&lt;</span>h3<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>id<span class="token operator">?</span><span class="token string">'编辑文章'</span><span class="token punctuation">:</span><span class="token string">'新增文章'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model <span class="token punctuation">:</span>model<span class="token operator">=</span><span class="token string">"artInfo"</span> ref<span class="token operator">=</span><span class="token string">"artInfoRef"</span> <span class="token punctuation">:</span>rules<span class="token operator">=</span><span class="token string">"artInfoRules"</span> <span class="token punctuation">:</span>hideRequiredMark<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"文章标题"</span> prop<span class="token operator">=</span><span class="token string">"title"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>input style<span class="token operator">=</span><span class="token string">"width:300px"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"artInfo.title"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item             style<span class="token operator">=</span><span class="token string">"width:200px"</span>            prop<span class="token operator">=</span><span class="token string">"cid"</span>            label<span class="token operator">=</span><span class="token string">"文章分类"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>select v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"artInfo.cid"</span> placeholder<span class="token operator">=</span><span class="token string">"请选择分类"</span> @change<span class="token operator">=</span><span class="token string">"cateChange"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>select<span class="token operator">-</span>option v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in Catelist"</span> <span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">"item.id"</span> <span class="token punctuation">:</span>value<span class="token operator">=</span><span class="token string">"item.id"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>select<span class="token operator">-</span>option<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>select<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"文章描述"</span> prop<span class="token operator">=</span><span class="token string">"desc"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>input type<span class="token operator">=</span><span class="token string">"textarea"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"artInfo.desc"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"缩略图"</span> prop<span class="token operator">=</span><span class="token string">"img"</span><span class="token operator">></span>                 <span class="token operator">&lt;</span>a<span class="token operator">-</span>upload                    name<span class="token operator">=</span><span class="token string">"file"</span>                    <span class="token punctuation">:</span>multiple<span class="token operator">=</span><span class="token string">"false"</span>                    <span class="token punctuation">:</span>action<span class="token operator">=</span><span class="token string">"uploadUrl"</span>                    <span class="token punctuation">:</span>headers<span class="token operator">=</span><span class="token string">"headers"</span>                    @change<span class="token operator">=</span><span class="token string">"upChange"</span>                    listType<span class="token operator">=</span><span class="token string">"picture"</span>                <span class="token operator">></span>                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>button<span class="token operator">></span> <span class="token operator">&lt;</span>a<span class="token operator">-</span>icon type<span class="token operator">=</span><span class="token string">"upload"</span> <span class="token operator">/</span><span class="token operator">></span> 上传图片 <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>                    <span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"id"</span><span class="token operator">></span>                        <span class="token operator">&lt;</span>img <span class="token punctuation">:</span>src<span class="token operator">=</span><span class="token string">"artInfo.img"</span> style<span class="token operator">=</span><span class="token string">"width:120px;height:100px"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>upload<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"内容"</span> prop<span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>Editor v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"artInfo.content"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Editor<span class="token operator">></span> <span class="token operator">--</span><span class="token operator">></span>                <span class="token operator">&lt;</span>mavon<span class="token operator">-</span>editor            ref<span class="token operator">=</span><span class="token string">"md"</span>            placeholder<span class="token operator">=</span><span class="token string">"请输入文档内容..."</span>            <span class="token punctuation">:</span>boxShadow<span class="token operator">=</span><span class="token string">"false"</span>            style<span class="token operator">=</span><span class="token string">"z-index:1;border: 1px solid #d9d9d9;height:50vh"</span>            v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"artInfo.content"</span>            <span class="token punctuation">:</span>toolbars<span class="token operator">=</span><span class="token string">"toolbars"</span>                        @imgAdd<span class="token operator">=</span><span class="token string">"$imgAdd"</span>          <span class="token operator">/</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span>                 style<span class="token operator">=</span><span class="token string">"margin-right:15px"</span>                 @click<span class="token operator">=</span><span class="token string">"artOk(artInfo.id)"</span>                <span class="token operator">></span>                <span class="token punctuation">{</span><span class="token punctuation">{</span>artInfo<span class="token punctuation">.</span>id<span class="token operator">?</span><span class="token string">"更新"</span><span class="token punctuation">:</span><span class="token string">'提交'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"danger"</span> @click<span class="token operator">=</span><span class="token string">"addCancel"</span><span class="token operator">></span>取消<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>card<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">import</span> <span class="token punctuation">{</span>Url<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../plugins/http"</span><span class="token keyword">import</span> Editor <span class="token keyword">from</span> <span class="token string">"../editor/index"</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    components<span class="token punctuation">:</span><span class="token punctuation">{</span>Editor<span class="token punctuation">}</span><span class="token punctuation">,</span>    props<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span><span class="token punctuation">{</span>            artInfo<span class="token punctuation">:</span><span class="token punctuation">{</span>                id<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>                title<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>                cid<span class="token punctuation">:</span>undefined<span class="token punctuation">,</span>                desc<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>                content<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>                img<span class="token punctuation">:</span><span class="token string">''</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            Catelist<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            uploadUrl<span class="token punctuation">:</span>Url<span class="token operator">+</span><span class="token string">'/api/admin/upload/'</span><span class="token punctuation">,</span>            headers<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>            artInfoRules<span class="token punctuation">:</span> <span class="token punctuation">{</span>        title<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">'请输入文章标题'</span><span class="token punctuation">,</span> trigger<span class="token punctuation">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        cid<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">'请选择文章分类'</span><span class="token punctuation">,</span> trigger<span class="token punctuation">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        desc<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span> required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">'请输入文章描述'</span><span class="token punctuation">,</span> trigger<span class="token punctuation">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span> max<span class="token punctuation">:</span> <span class="token number">120</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">'描述最多可写120个字符'</span><span class="token punctuation">,</span> trigger<span class="token punctuation">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        content<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> required<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">'请输入文章内容'</span><span class="token punctuation">,</span> trigger<span class="token punctuation">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// markdown对象</span>            toolbars<span class="token punctuation">:</span> <span class="token punctuation">{</span>        bold<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 粗体</span>        italic<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 斜体</span>        header<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 标题</span>        underline<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 下划线</span>        strikethrough<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 中划线</span>        mark<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 标记</span>        superscript<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 上角标</span>        subscript<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 下角标</span>        quote<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 引用</span>        ol<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 有序列表</span>        ul<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 无序列表</span>        link<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 链接</span>        imagelink<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 图片链接</span>        code<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// code</span>        table<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 表格</span>        fullscreen<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 全屏编辑</span>        readmodel<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 沉浸式阅读</span>        htmlcode<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 展示html源码</span>        help<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 帮助</span>        <span class="token comment" spellcheck="true">/* 1.3.5 */</span>        undo<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 上一步</span>        redo<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 下一步</span>        trash<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 清空</span>        save<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 保存（触发events中的save事件）</span>        <span class="token comment" spellcheck="true">/* 1.4.2 */</span>        navigation<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 导航目录</span>        <span class="token comment" spellcheck="true">/* 2.1.8 */</span>        alignleft<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 左对齐</span>        aligncenter<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 居中</span>        alignright<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 右对齐</span>        <span class="token comment" spellcheck="true">/* 2.2.1 */</span>        subfield<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 单双栏模式</span>        preview<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment" spellcheck="true">// 预览</span>      <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span>Authorization<span class="token punctuation">:</span><span class="token template-string"><span class="token string">`Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getArtInfo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    methods<span class="token punctuation">:</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 查询文章信息</span>        <span class="token keyword">async</span> <span class="token function">getArtInfo</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">const</span> <span class="token punctuation">{</span>data<span class="token punctuation">:</span> res<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`api/v1/article/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/`</span></span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>artInfo <span class="token operator">=</span> res<span class="token punctuation">.</span>data            <span class="token keyword">this</span><span class="token punctuation">.</span>artInfo<span class="token punctuation">.</span>id <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>ID        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 获取分类</span>    <span class="token keyword">async</span> <span class="token function">getCateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'api/v1/category/'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>params<span class="token punctuation">:</span> <span class="token punctuation">{</span>          size<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>          page<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>Catelist <span class="token operator">=</span> res<span class="token punctuation">.</span>data    <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">cateChange</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>artInfo<span class="token punctuation">.</span>cid <span class="token operator">=</span> val        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">upChange</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token string">'uploading'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'done'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'上传成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">const</span> imgUrl <span class="token operator">=</span> info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data                <span class="token keyword">this</span><span class="token punctuation">.</span>artInfo<span class="token punctuation">.</span>img <span class="token operator">=</span> imgUrl      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>file<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'error'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`上传失败`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 提交</span>        <span class="token function">artOk</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>artInfoRef<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>valid<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'参数验证未通过，请按要求录入文章内容'</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/admin/article/'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>artInfo<span class="token punctuation">)</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/admin/artlist'</span><span class="token punctuation">)</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'添加文章成功'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/api/admin/article/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/`</span></span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>artInfo<span class="token punctuation">)</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/admin/artlist'</span><span class="token punctuation">)</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'更新文章成功'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 取消</span>        <span class="token function">addCancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>artInfoRef<span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 上传图片方法</span>    <span class="token keyword">async</span> <span class="token function">$imgAdd</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> $file<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">var</span> formdata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            formdata<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">,</span> $file<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">const</span> <span class="token punctuation">{</span>data<span class="token punctuation">:</span> res<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/api/admin/upload/"</span><span class="token punctuation">,</span>formdata<span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'multipart/form-data'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>md<span class="token punctuation">.</span><span class="token function">$imglst2Url</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>pos<span class="token punctuation">,</span> <span class="token string">"http://localhost:8081/"</span><span class="token operator">+</span>res<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><p>这样的话，我们以后修改起来也是很方便的，只是，在后台我们需要一个渲染库。</p><h2 id="渲染库"><a href="#渲染库" class="headerlink" title="渲染库"></a>渲染库</h2><blockquote><p>渲染库使用的是<a href="https://pkg.go.dev/github.com/gomarkdown/markdown#section-readme">这个</a></p></blockquote><p>安装</p><pre class=" language-go"><code class="language-go"><span class="token keyword">go</span> get <span class="token operator">-</span>u github<span class="token punctuation">.</span>com<span class="token operator">/</span>gomarkdown<span class="token operator">/</span>markdown</code></pre><p>可以在utils下新建一个<code>Markdown.go</code>，写成工具函数。</p><pre class=" language-go"><code class="language-go"><span class="token keyword">package</span> utils<span class="token keyword">import</span> <span class="token punctuation">(</span>    <span class="token string">"github.com/gomarkdown/markdown"</span>    <span class="token string">"github.com/gomarkdown/markdown/html"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// 渲染html</span><span class="token keyword">func</span> <span class="token function">Render</span><span class="token punctuation">(</span>data <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>    htmlFlags <span class="token operator">:=</span> html<span class="token punctuation">.</span>CommonFlags <span class="token operator">|</span> html<span class="token punctuation">.</span>HrefTargetBlank    opts <span class="token operator">:=</span> html<span class="token punctuation">.</span>RendererOptions<span class="token punctuation">{</span>Flags<span class="token punctuation">:</span> htmlFlags<span class="token punctuation">}</span>    renderer <span class="token operator">:=</span> html<span class="token punctuation">.</span><span class="token function">NewRenderer</span><span class="token punctuation">(</span>opts<span class="token punctuation">)</span>    md <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>    content <span class="token operator">:=</span> markdown<span class="token punctuation">.</span><span class="token function">ToHTML</span><span class="token punctuation">(</span>md<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> renderer<span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token function">string</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p> 然后只需要在必要的地方来使用这个工具即可。</p>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gin-vue搭建个人博客-8</title>
      <link href="2021/07/16/gin-vue-da-jian-ge-ren-bo-ke-8/"/>
      <url>2021/07/16/gin-vue-da-jian-ge-ren-bo-ke-8/</url>
      
        <content type="html"><![CDATA[<h2 id="编辑新增等功能"><a href="#编辑新增等功能" class="headerlink" title="编辑新增等功能"></a>编辑新增等功能</h2><blockquote><p>使用ant-design的组件，关于引入和使用就不说了，把UserList.vue完整的代码放出来供大家参考，一些必要的地方也已经写好了注释，大部分代码都是重复的。和之前的有些许改变。后台也可以按照自己喜欢的风格来做。</p></blockquote><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>card<span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>row <span class="token punctuation">:</span>gutter<span class="token operator">=</span><span class="token string">"20"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token punctuation">:</span>span<span class="token operator">=</span><span class="token string">"6"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>search                     v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"queryParam.username"</span>                    allowClear placeholder<span class="token operator">=</span><span class="token string">"请输入用户名"</span>                     enter<span class="token operator">-</span>button                     @search<span class="token operator">=</span><span class="token string">"getUserList"</span> <span class="token operator">/</span><span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token punctuation">:</span>span<span class="token operator">=</span><span class="token string">"4"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"AddUserVisible = true"</span><span class="token operator">></span>新增<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>row<span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>table                <span class="token punctuation">:</span>columns<span class="token operator">=</span><span class="token string">'columns'</span>                 rowKey<span class="token operator">=</span><span class="token string">'ID'</span>                <span class="token punctuation">:</span>pagination<span class="token operator">=</span><span class="token string">"pagination"</span>                <span class="token punctuation">:</span>dataSource<span class="token operator">=</span><span class="token string">"userlist"</span>                bordered                @change<span class="token operator">=</span><span class="token string">"handleTableChange"</span>            <span class="token operator">></span>            <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">"role"</span> slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"role"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>role <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"管理员"</span><span class="token punctuation">:</span><span class="token string">"订阅者"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>            <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"action"</span> slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"data"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"actionSlot"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"info"</span> icon<span class="token operator">=</span><span class="token string">"info"</span> style<span class="token operator">=</span><span class="token string">"margin-right:15px"</span> @click<span class="token operator">=</span><span class="token string">"ChangePassword(data.ID)"</span><span class="token operator">></span>修改密码<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> icon<span class="token operator">=</span><span class="token string">"edit"</span> style<span class="token operator">=</span><span class="token string">"margin-right:15px"</span> @click<span class="token operator">=</span><span class="token string">"editUser(data.ID)"</span><span class="token operator">></span>编辑<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>popconfirm title<span class="token operator">=</span><span class="token string">"确认删除？删除后无法恢复"</span> ok<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"确认"</span> cancel<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"取消"</span> @confirm<span class="token operator">=</span><span class="token string">"delUser(data.ID)"</span><span class="token operator">></span>                  <span class="token operator">&lt;</span>a<span class="token operator">-</span>button icon<span class="token operator">=</span><span class="token string">"delete"</span> type<span class="token operator">=</span><span class="token string">"danger"</span><span class="token operator">></span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>popconfirm<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>table<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>card<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 新增用户对话框 <span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>modal      title<span class="token operator">=</span><span class="token string">"新增用户"</span>      <span class="token punctuation">:</span>visible<span class="token operator">=</span><span class="token string">"AddUserVisible"</span>      @ok<span class="token operator">=</span><span class="token string">"AddUserOk"</span>      @cancel<span class="token operator">=</span><span class="token string">"addUserCanal"</span>            closable    <span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model <span class="token punctuation">:</span>model<span class="token operator">=</span><span class="token string">"userinfo"</span> <span class="token punctuation">:</span>rules<span class="token operator">=</span><span class="token string">"userRules"</span> ref<span class="token operator">=</span><span class="token string">"addUserRef"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"用户名"</span> prop<span class="token operator">=</span><span class="token string">"username"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"userinfo.username"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"密码"</span> prop<span class="token operator">=</span><span class="token string">"password"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"userinfo.password"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"确认密码"</span> prop<span class="token operator">=</span><span class="token string">"checkpass"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"userinfo.checkpass"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>modal<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 编辑用户 <span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>modal      title<span class="token operator">=</span><span class="token string">"编辑用户"</span>      <span class="token punctuation">:</span>visible<span class="token operator">=</span><span class="token string">"editUserVisible"</span>      @ok<span class="token operator">=</span><span class="token string">"editUserOk"</span>            width<span class="token operator">=</span><span class="token string">"60%"</span>      @cancel<span class="token operator">=</span><span class="token string">"editUserCanal"</span>            closable    <span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model <span class="token punctuation">:</span>model<span class="token operator">=</span><span class="token string">"userinfo"</span> <span class="token punctuation">:</span>rules<span class="token operator">=</span><span class="token string">"userRules"</span> ref<span class="token operator">=</span><span class="token string">"addUserRef"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"用户名"</span> prop<span class="token operator">=</span><span class="token string">"username"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"userinfo.username"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"是否为管理员"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">-</span><span class="token keyword">switch</span>            <span class="token punctuation">:</span>checked<span class="token operator">=</span><span class="token string">"IsAdmin"</span>            checked<span class="token operator">-</span>children<span class="token operator">=</span><span class="token string">"是"</span>            un<span class="token operator">-</span>checked<span class="token operator">-</span>children<span class="token operator">=</span><span class="token string">"否"</span>            @change<span class="token operator">=</span><span class="token string">"adminChange"</span>          <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>modal<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 编辑密码 <span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>modal      closable      title<span class="token operator">=</span><span class="token string">"修改密码"</span>      <span class="token punctuation">:</span>visible<span class="token operator">=</span><span class="token string">"changePasswordVisible"</span>      width<span class="token operator">=</span><span class="token string">"60%"</span>      @ok<span class="token operator">=</span><span class="token string">"changePasswordOk"</span>      @cancel<span class="token operator">=</span><span class="token string">"changePasswordCancel"</span>      destroyOnClose    <span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model <span class="token punctuation">:</span>model<span class="token operator">=</span><span class="token string">"userinfo"</span> <span class="token punctuation">:</span>rules<span class="token operator">=</span><span class="token string">"userRules"</span> ref<span class="token operator">=</span><span class="token string">"addUserRef"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item has<span class="token operator">-</span>feedback label<span class="token operator">=</span><span class="token string">"密码"</span> prop<span class="token operator">=</span><span class="token string">"password"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"userinfo.password"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item has<span class="token operator">-</span>feedback label<span class="token operator">=</span><span class="token string">"确认密码"</span> prop<span class="token operator">=</span><span class="token string">"checkpass"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"userinfo.checkpass"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>modal<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">const</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'ID'</span><span class="token punctuation">,</span>    dataIndex<span class="token punctuation">:</span> <span class="token string">'ID'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'10%'</span><span class="token punctuation">,</span>        align<span class="token punctuation">:</span><span class="token string">'center'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'用户名'</span><span class="token punctuation">,</span>    dataIndex<span class="token punctuation">:</span> <span class="token string">'username'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'username'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'20%'</span><span class="token punctuation">,</span>        align<span class="token punctuation">:</span><span class="token string">'center'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'角色'</span><span class="token punctuation">,</span>    dataIndex<span class="token punctuation">:</span> <span class="token string">'role'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'role'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'20%'</span><span class="token punctuation">,</span>        scopedSlots<span class="token punctuation">:</span><span class="token punctuation">{</span>customRender<span class="token punctuation">:</span><span class="token string">'role'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        align<span class="token punctuation">:</span><span class="token string">'center'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'操作'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'action'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'30%'</span><span class="token punctuation">,</span>        scopedSlots<span class="token punctuation">:</span><span class="token punctuation">{</span>customRender<span class="token punctuation">:</span><span class="token string">'action'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        align<span class="token punctuation">:</span><span class="token string">'center'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span><span class="token punctuation">{</span>            columns<span class="token punctuation">,</span>            changePasswordVisible<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// 分页</span>            pagination<span class="token punctuation">:</span> <span class="token punctuation">{</span>        pageSizeOptions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'10'</span><span class="token punctuation">,</span> <span class="token string">'20'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        pageSize<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>        total<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        showSizeChanger<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        showTotal<span class="token punctuation">:</span> <span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token template-string"><span class="token string">`共</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">条`</span></span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>            queryParam<span class="token punctuation">:</span> <span class="token punctuation">{</span>                username<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>        pagesize<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>        pagenum<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>            userlist<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            AddUserVisible<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>            editUserVisible<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>            userinfo<span class="token punctuation">:</span><span class="token punctuation">{</span>                id<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>                username<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>                password<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>                checkpass<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>                role<span class="token punctuation">:</span><span class="token number">2</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            userRules<span class="token punctuation">:</span><span class="token punctuation">{</span>                username<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span>            validator<span class="token punctuation">:</span> <span class="token punctuation">(</span>rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>username <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'请输入用户名'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token punctuation">}</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>username<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">4</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>username<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'用户名应当在4到12个字符之间'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            trigger<span class="token punctuation">:</span> <span class="token string">'blur'</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        password<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span>            validator<span class="token punctuation">:</span> <span class="token punctuation">(</span>rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>password <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'请输入密码'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token punctuation">}</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>password<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">6</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>password<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'密码应当在6到20位之间'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            trigger<span class="token punctuation">:</span> <span class="token string">'blur'</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>                checkpass<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span>            validator<span class="token punctuation">:</span> <span class="token punctuation">(</span>rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>checkpass <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'请输入密码'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token punctuation">}</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>password <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>checkpass<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'密码不一致，请重新输入'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            trigger<span class="token punctuation">:</span> <span class="token string">'blur'</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 加载前布尔判断</span>    IsAdmin<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>role <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">true</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    methods<span class="token punctuation">:</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 查询用户</span>        <span class="token keyword">async</span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span>res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'api/v1/user/'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>                params<span class="token punctuation">:</span><span class="token punctuation">{</span>                    username<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>username<span class="token punctuation">,</span>                    size<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagesize<span class="token punctuation">,</span>                    page<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum<span class="token punctuation">,</span>                    <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>userlist <span class="token operator">=</span> res<span class="token punctuation">.</span>data            <span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>total        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 分页</span>        <span class="token function">handleTableChange</span><span class="token punctuation">(</span>pagination<span class="token punctuation">,</span> filters<span class="token punctuation">,</span> sorter<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">var</span> pager <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>pagination <span class="token punctuation">}</span>      pager<span class="token punctuation">.</span>current <span class="token operator">=</span> pagination<span class="token punctuation">.</span>current      pager<span class="token punctuation">.</span>pageSize <span class="token operator">=</span> pagination<span class="token punctuation">.</span>pageSize      <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagesize <span class="token operator">=</span> pagination<span class="token punctuation">.</span>pageSize      <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum <span class="token operator">=</span> pagination<span class="token punctuation">.</span>current      <span class="token keyword">if</span> <span class="token punctuation">(</span>pagination<span class="token punctuation">.</span>pageSize <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum <span class="token operator">=</span> <span class="token number">1</span>        pager<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token number">1</span>      <span class="token punctuation">}</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>pagination <span class="token operator">=</span> pager      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 删除用户</span>        <span class="token keyword">async</span> <span class="token function">delUser</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>          <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`api/admin/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/`</span></span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum <span class="token operator">=</span> <span class="token number">1</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">AddUserOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>addUserRef<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>vaild<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vaild<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"格式不正确"</span><span class="token punctuation">)</span>                <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"api/v1/user/"</span><span class="token punctuation">,</span><span class="token punctuation">{</span>                    <span class="token string">"username"</span><span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>username<span class="token punctuation">,</span>                    <span class="token string">"password"</span><span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>password<span class="token punctuation">,</span>                    <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>role<span class="token punctuation">,</span>                    <span class="token punctuation">}</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// 清空搜索框</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>addUserRef<span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// 关闭弹窗</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>AddUserVisible <span class="token operator">=</span> <span class="token boolean">false</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'添加用户成功'</span><span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// role布尔值判断</span>        <span class="token function">adminChange</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>checked<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token number">1</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token number">2</span>      <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 取消的方法</span>        <span class="token function">addUserCanal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>addUserRef<span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>AddUserVisible <span class="token operator">=</span> <span class="token boolean">false</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 编辑框获取用户信息</span>        <span class="token keyword">async</span> <span class="token function">editUser</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>editUserVisible <span class="token operator">=</span> <span class="token boolean">true</span>            <span class="token keyword">const</span> <span class="token punctuation">{</span>data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/api/v1/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/`</span></span><span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>userinfo <span class="token operator">=</span> res<span class="token punctuation">.</span>data            <span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>id <span class="token operator">=</span> id        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 编辑用户</span>        <span class="token function">editUserOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>addUserRef<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>vaild<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>vaild<span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"格式不正确"</span><span class="token punctuation">)</span>                <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/api/admin/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/`</span></span><span class="token punctuation">,</span><span class="token punctuation">{</span>                    <span class="token string">"username"</span><span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>username<span class="token punctuation">,</span>                    <span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>role<span class="token punctuation">,</span>                    <span class="token punctuation">}</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// 清空搜索框</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>addUserRef<span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// 关闭弹窗</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>editUserVisible <span class="token operator">=</span> <span class="token boolean">false</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'编辑用户成功'</span><span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 取消编辑销毁数据</span>        <span class="token function">editUserCanal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>addUserRef<span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>editUserVisible <span class="token operator">=</span> <span class="token boolean">false</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 修改密码获取信息</span>        <span class="token function">ChangePassword</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>changePasswordVisible <span class="token operator">=</span> <span class="token boolean">true</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>id <span class="token operator">=</span> id        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 修改密码</span>        <span class="token function">changePasswordOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>addUserRef<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>valid<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'参数不符合要求，请重新输入'</span><span class="token punctuation">)</span>        <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`/api/admin/editpass/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/`</span></span><span class="token punctuation">,</span><span class="token punctuation">{</span>                <span class="token string">"password"</span><span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>userinfo<span class="token punctuation">.</span>password            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>changePasswordVisible <span class="token operator">=</span> <span class="token boolean">false</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'修改密码成功'</span><span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 修改密码取消</span>        <span class="token function">changePasswordCancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>addUserRef<span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>changePasswordVisible <span class="token operator">=</span> <span class="token boolean">false</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'已取消'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style<span class="token operator">></span><span class="token punctuation">.</span>actionSlot<span class="token punctuation">{</span>    display<span class="token punctuation">:</span> flex<span class="token punctuation">;</span>    justify<span class="token operator">-</span>content<span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><h2 id="分类和文章列表页"><a href="#分类和文章列表页" class="headerlink" title="分类和文章列表页"></a>分类和文章列表页</h2><blockquote><p>CV大法好，只是在后端新增了一个搜索文章的功能。和搜索用户也是一样的啦。</p></blockquote><p><code>model/Article.go</code></p><pre class=" language-go"><code class="language-go"><span class="token comment" spellcheck="true">// SearchArticle 搜索文章标题</span><span class="token keyword">func</span> <span class="token function">SearchArticle</span><span class="token punctuation">(</span>title <span class="token builtin">string</span><span class="token punctuation">,</span> pageSize <span class="token builtin">int</span><span class="token punctuation">,</span> pageNum <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>Article<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> articleList <span class="token punctuation">[</span><span class="token punctuation">]</span>Article    <span class="token keyword">var</span> err <span class="token builtin">error</span>    <span class="token keyword">var</span> total <span class="token builtin">int64</span>    err <span class="token operator">=</span> Db<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span><span class="token string">"article.id,title, img, created_at, updated_at, `desc`, comment_count, read_count, category.name"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Limit</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Offset</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pageNum<span class="token number">-1</span><span class="token punctuation">)</span><span class="token operator">*</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Order</span><span class="token punctuation">(</span><span class="token string">"Created_At DESC"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Joins</span><span class="token punctuation">(</span><span class="token string">"Category"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span><span class="token string">"title LIKE ?"</span><span class="token punctuation">,</span>        title<span class="token operator">+</span><span class="token string">"%"</span><span class="token punctuation">,</span>    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>articleList<span class="token punctuation">)</span><span class="token punctuation">.</span>Error    <span class="token comment" spellcheck="true">// 单独计数</span>    Db<span class="token punctuation">.</span><span class="token function">Model</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>articleList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>total<span class="token punctuation">)</span>    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> errmsg<span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span> <span class="token number">0</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> articleList<span class="token punctuation">,</span> errmsg<span class="token punctuation">.</span>SUCCSE<span class="token punctuation">,</span> total<span class="token punctuation">}</span></code></pre><p><code>/api/v1/article.go</code></p><pre class=" language-go"><code class="language-go"><span class="token comment" spellcheck="true">// 查询文章列表</span><span class="token keyword">func</span> <span class="token function">GetArticles</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span>  <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 字符串转int</span>    Size<span class="token punctuation">,</span><span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">DefaultQuery</span><span class="token punctuation">(</span><span class="token string">"size"</span><span class="token punctuation">,</span><span class="token string">"3"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    Page<span class="token punctuation">,</span><span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">DefaultQuery</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    title <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>        data<span class="token punctuation">,</span> code<span class="token punctuation">,</span> total <span class="token operator">:=</span> model<span class="token punctuation">.</span><span class="token function">GetArticles</span><span class="token punctuation">(</span>Size<span class="token punctuation">,</span> Page<span class="token punctuation">)</span>        c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span>            <span class="token string">"code"</span><span class="token punctuation">:</span>  code<span class="token punctuation">,</span>            <span class="token string">"msg"</span><span class="token punctuation">:</span>   errmsg<span class="token punctuation">.</span><span class="token function">GetErrorMsg</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">"data"</span><span class="token punctuation">:</span>  data<span class="token punctuation">,</span>            <span class="token string">"total"</span><span class="token punctuation">:</span> total<span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token keyword">return</span>    <span class="token punctuation">}</span>    data<span class="token punctuation">,</span> code<span class="token punctuation">,</span> total <span class="token operator">:=</span> model<span class="token punctuation">.</span><span class="token function">SearchArticle</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span>Size<span class="token punctuation">,</span>Page<span class="token punctuation">)</span>    c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span>        <span class="token string">"code"</span><span class="token punctuation">:</span>  code<span class="token punctuation">,</span>        <span class="token string">"data"</span><span class="token punctuation">:</span>    data<span class="token punctuation">,</span>        <span class="token string">"total"</span><span class="token punctuation">:</span>   total<span class="token punctuation">,</span>        <span class="token string">"msg"</span><span class="token punctuation">:</span> errmsg<span class="token punctuation">.</span><span class="token function">GetErrorMsg</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p>前端页面也放一下代码，闭着眼复制就可以了。</p><h3 id="components-article-ArtList-vue"><a href="#components-article-ArtList-vue" class="headerlink" title="components/article/ArtList.vue"></a><code>components/article/ArtList.vue</code></h3><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>a<span class="token operator">-</span>card<span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">-</span>row <span class="token punctuation">:</span>gutter<span class="token operator">=</span><span class="token string">"20"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token punctuation">:</span>span<span class="token operator">=</span><span class="token string">"6"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>search            v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"queryParam.title"</span>            placeholder<span class="token operator">=</span><span class="token string">"输入文章名查找"</span>            enter<span class="token operator">-</span>button            allowClear            @search<span class="token operator">=</span><span class="token string">"getArtList"</span>          <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token punctuation">:</span>span<span class="token operator">=</span><span class="token string">"4"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"$router.push('addart')"</span><span class="token operator">></span>新增<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token punctuation">:</span>span<span class="token operator">=</span><span class="token string">"3"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">-</span>select placeholder<span class="token operator">=</span><span class="token string">"请选择分类"</span> style<span class="token operator">=</span><span class="token string">"width: 200px"</span> @change<span class="token operator">=</span><span class="token string">"CateChange"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>select<span class="token operator">-</span>option              v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"item in Catelist"</span>              <span class="token punctuation">:</span>key<span class="token operator">=</span><span class="token string">"item.id"</span>              <span class="token punctuation">:</span>value<span class="token operator">=</span><span class="token string">"item.id"</span>            <span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> item<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>select<span class="token operator">-</span>option<span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>select<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token punctuation">:</span>span<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"info"</span> @click<span class="token operator">=</span><span class="token string">"getArtList()"</span><span class="token operator">></span>显示全部<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>row<span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">-</span>table        rowKey<span class="token operator">=</span><span class="token string">"ID"</span>        <span class="token punctuation">:</span>columns<span class="token operator">=</span><span class="token string">"columns"</span>        <span class="token punctuation">:</span>pagination<span class="token operator">=</span><span class="token string">"pagination"</span>        <span class="token punctuation">:</span>dataSource<span class="token operator">=</span><span class="token string">"Artlist"</span>        bordered        @change<span class="token operator">=</span><span class="token string">"handleTableChange"</span>      <span class="token operator">></span>        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"ArtImg"</span> slot<span class="token operator">=</span><span class="token string">"img"</span> slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"img"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>img <span class="token punctuation">:</span>src<span class="token operator">=</span><span class="token string">"img"</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>        <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"action"</span> slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"data"</span><span class="token operator">></span>          <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"actionSlot"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>button              size<span class="token operator">=</span><span class="token string">"small"</span>              type<span class="token operator">=</span><span class="token string">"primary"</span>              icon<span class="token operator">=</span><span class="token string">"edit"</span>              style<span class="token operator">=</span><span class="token string">"margin-right: 15px"</span>              @click<span class="token operator">=</span><span class="token string">"$router.push(`addart/${data.ID}`)"</span>            <span class="token operator">></span>编辑<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>                        <span class="token operator">&lt;</span>a<span class="token operator">-</span>popconfirm title<span class="token operator">=</span><span class="token string">"确认删除？删除后无法恢复"</span> ok<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"确认"</span> cancel<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"取消"</span> @confirm<span class="token operator">=</span><span class="token string">"deleteArt(data.ID)"</span><span class="token operator">></span>                          <span class="token operator">&lt;</span>a<span class="token operator">-</span>button icon<span class="token operator">=</span><span class="token string">"delete"</span> size<span class="token operator">=</span><span class="token string">"small"</span> type<span class="token operator">=</span><span class="token string">"danger"</span><span class="token operator">></span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>                        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>popconfirm<span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>table<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>card<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">import</span> day <span class="token keyword">from</span> <span class="token string">'dayjs'</span><span class="token keyword">const</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'ID'</span><span class="token punctuation">,</span>    dataIndex<span class="token punctuation">:</span> <span class="token string">'ID'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'5%'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>    align<span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'更新日期'</span><span class="token punctuation">,</span>    dataIndex<span class="token punctuation">:</span> <span class="token string">'UpdatedAt'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'10%'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'UpdatedAt'</span><span class="token punctuation">,</span>    align<span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>    customRender<span class="token punctuation">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> val <span class="token operator">?</span> <span class="token function">day</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY年MM月DD日 HH:mm'</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token string">'暂无'</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'分类'</span><span class="token punctuation">,</span>    dataIndex<span class="token punctuation">:</span> <span class="token string">'Category.name'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'5%'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>    align<span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'文章标题'</span><span class="token punctuation">,</span>    dataIndex<span class="token punctuation">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'15%'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'title'</span><span class="token punctuation">,</span>    align<span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'文章描述'</span><span class="token punctuation">,</span>    dataIndex<span class="token punctuation">:</span> <span class="token string">'desc'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'20%'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'desc'</span><span class="token punctuation">,</span>    align<span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'缩略图'</span><span class="token punctuation">,</span>    dataIndex<span class="token punctuation">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'20%'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span>    align<span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>    scopedSlots<span class="token punctuation">:</span> <span class="token punctuation">{</span> customRender<span class="token punctuation">:</span> <span class="token string">'img'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'操作'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'15%'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'action'</span><span class="token punctuation">,</span>    align<span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>    scopedSlots<span class="token punctuation">:</span> <span class="token punctuation">{</span> customRender<span class="token punctuation">:</span> <span class="token string">'action'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      pagination<span class="token punctuation">:</span> <span class="token punctuation">{</span>        pageSizeOptions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'10'</span><span class="token punctuation">,</span> <span class="token string">'20'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        pageSize<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>        total<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        showSizeChanger<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        showTotal<span class="token punctuation">:</span> <span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token template-string"><span class="token string">`共</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">条`</span></span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      Artlist<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      Catelist<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      columns<span class="token punctuation">,</span>      queryParam<span class="token punctuation">:</span> <span class="token punctuation">{</span>        title<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        pagesize<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>        pagenum<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getArtList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 获取文章列表</span>    <span class="token keyword">async</span> <span class="token function">getArtList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'api/v1/article/'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>        params<span class="token punctuation">:</span> <span class="token punctuation">{</span>          title<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>title<span class="token punctuation">,</span>          size<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagesize<span class="token punctuation">,</span>          page<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum<span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">1004</span> <span class="token operator">||</span> <span class="token number">1005</span> <span class="token operator">||</span> <span class="token number">1006</span> <span class="token operator">||</span> <span class="token number">1007</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>message<span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>Artlist <span class="token operator">=</span> res<span class="token punctuation">.</span>data      <span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>total    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// 获取分类</span>    <span class="token keyword">async</span> <span class="token function">getCateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'api/v1/category/'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>params<span class="token punctuation">:</span> <span class="token punctuation">{</span>          size<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>          page<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>Catelist <span class="token operator">=</span> res<span class="token punctuation">.</span>data      <span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>total    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// 更改分页</span>    <span class="token function">handleTableChange</span><span class="token punctuation">(</span>pagination<span class="token punctuation">,</span> filters<span class="token punctuation">,</span> sorter<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">var</span> pager <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>pagination <span class="token punctuation">}</span>      pager<span class="token punctuation">.</span>current <span class="token operator">=</span> pagination<span class="token punctuation">.</span>current      pager<span class="token punctuation">.</span>pageSize <span class="token operator">=</span> pagination<span class="token punctuation">.</span>pageSize      <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagesize <span class="token operator">=</span> pagination<span class="token punctuation">.</span>pageSize      <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum <span class="token operator">=</span> pagination<span class="token punctuation">.</span>current      <span class="token keyword">if</span> <span class="token punctuation">(</span>pagination<span class="token punctuation">.</span>pageSize <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum <span class="token operator">=</span> <span class="token number">1</span>        pager<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token number">1</span>      <span class="token punctuation">}</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>pagination <span class="token operator">=</span> pager      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getArtList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// 删除文章</span>    <span class="token keyword">async</span> <span class="token function">deleteArt</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`api/admin/article/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/`</span></span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum <span class="token operator">=</span> <span class="token number">1</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getArtList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// 查询分类下的文章</span>    <span class="token function">CateChange</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCateArt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token keyword">async</span> <span class="token function">getCateArt</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`api/v1/catelist/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>        params<span class="token punctuation">:</span> <span class="token punctuation">{</span> size<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagesize<span class="token punctuation">,</span> page<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>Artlist <span class="token operator">=</span> res<span class="token punctuation">.</span>data      <span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>total    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>style scoped<span class="token operator">></span><span class="token punctuation">.</span>actionSlot <span class="token punctuation">{</span>  display<span class="token punctuation">:</span> flex<span class="token punctuation">;</span>  justify<span class="token operator">-</span>content<span class="token punctuation">:</span> center<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">.</span>ArtImg <span class="token punctuation">{</span>  height<span class="token punctuation">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>  width<span class="token punctuation">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">.</span>ArtImg img <span class="token punctuation">{</span>  width<span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>  height<span class="token punctuation">:</span> 80px<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span></code></pre><h3 id="components-category-CateList-vue"><a href="#components-category-CateList-vue" class="headerlink" title="components/category/CateList.vue"></a><code>components/category/CateList.vue</code></h3><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>card<span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>row <span class="token punctuation">:</span>gutter<span class="token operator">=</span><span class="token string">"20"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>col <span class="token punctuation">:</span>span<span class="token operator">=</span><span class="token string">"4"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"AddcateVisible = true"</span><span class="token operator">></span>新增分类<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>col<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>row<span class="token operator">></span>            <span class="token operator">&lt;</span>a<span class="token operator">-</span>table                <span class="token punctuation">:</span>columns<span class="token operator">=</span><span class="token string">'columns'</span>                 rowKey<span class="token operator">=</span><span class="token string">'id'</span>                <span class="token punctuation">:</span>pagination<span class="token operator">=</span><span class="token string">"pagination"</span>                <span class="token punctuation">:</span>dataSource<span class="token operator">=</span><span class="token string">"catelist"</span>                bordered                @change<span class="token operator">=</span><span class="token string">"handleTableChange"</span>            <span class="token operator">></span>            <span class="token operator">&lt;</span>template slot<span class="token operator">=</span><span class="token string">"action"</span> slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"data"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"actionSlot"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> icon<span class="token operator">=</span><span class="token string">"edit"</span> style<span class="token operator">=</span><span class="token string">"margin-right:15px"</span> @click<span class="token operator">=</span><span class="token string">"editcate(data.id)"</span><span class="token operator">></span>编辑<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>popconfirm title<span class="token operator">=</span><span class="token string">"确认删除？删除后无法恢复"</span> ok<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"确认"</span> cancel<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">"取消"</span> @confirm<span class="token operator">=</span><span class="token string">"delcate(data.id)"</span><span class="token operator">></span>                  <span class="token operator">&lt;</span>a<span class="token operator">-</span>button icon<span class="token operator">=</span><span class="token string">"delete"</span> type<span class="token operator">=</span><span class="token string">"danger"</span><span class="token operator">></span>删除<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>popconfirm<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>table<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>card<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 新增分类对话框 <span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>modal      title<span class="token operator">=</span><span class="token string">"新增分类"</span>      <span class="token punctuation">:</span>visible<span class="token operator">=</span><span class="token string">"AddcateVisible"</span>      @ok<span class="token operator">=</span><span class="token string">"AddcateOk"</span>      @cancel<span class="token operator">=</span><span class="token string">"addcateCanal"</span>            closable    <span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model <span class="token punctuation">:</span>model<span class="token operator">=</span><span class="token string">"cateinfo"</span> ref<span class="token operator">=</span><span class="token string">"addcateRef"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"分类名"</span> prop<span class="token operator">=</span><span class="token string">"name"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"cateinfo.name"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>modal<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 编辑分类 <span class="token operator">--</span><span class="token operator">></span>        <span class="token operator">&lt;</span>a<span class="token operator">-</span>modal      title<span class="token operator">=</span><span class="token string">"编辑分类"</span>      <span class="token punctuation">:</span>visible<span class="token operator">=</span><span class="token string">"editcateVisible"</span>      @ok<span class="token operator">=</span><span class="token string">"editcateOk"</span>            width<span class="token operator">=</span><span class="token string">"60%"</span>      @cancel<span class="token operator">=</span><span class="token string">"editcateCanal"</span>            closable    <span class="token operator">></span>      <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model <span class="token punctuation">:</span>model<span class="token operator">=</span><span class="token string">"cateinfo"</span> ref<span class="token operator">=</span><span class="token string">"addcateRef"</span><span class="token operator">></span>                <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"分类名"</span> prop<span class="token operator">=</span><span class="token string">"name"</span><span class="token operator">></span>                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"cateinfo.name"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>input<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">-</span>item<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>model<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>modal<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token keyword">const</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'ID'</span><span class="token punctuation">,</span>    dataIndex<span class="token punctuation">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'10%'</span><span class="token punctuation">,</span>        align<span class="token punctuation">:</span><span class="token string">'center'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'分类名'</span><span class="token punctuation">,</span>    dataIndex<span class="token punctuation">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'20%'</span><span class="token punctuation">,</span>        align<span class="token punctuation">:</span><span class="token string">'center'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>    title<span class="token punctuation">:</span> <span class="token string">'操作'</span><span class="token punctuation">,</span>    key<span class="token punctuation">:</span> <span class="token string">'action'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span> <span class="token string">'30%'</span><span class="token punctuation">,</span>        scopedSlots<span class="token punctuation">:</span><span class="token punctuation">{</span>customRender<span class="token punctuation">:</span><span class="token string">'action'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        align<span class="token punctuation">:</span><span class="token string">'center'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span><span class="token punctuation">{</span>            columns<span class="token punctuation">,</span>            changePasswordVisible<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// 分页</span>            pagination<span class="token punctuation">:</span> <span class="token punctuation">{</span>        pageSizeOptions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'10'</span><span class="token punctuation">,</span> <span class="token string">'20'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        pageSize<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>        total<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        showSizeChanger<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        showTotal<span class="token punctuation">:</span> <span class="token punctuation">(</span>total<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token template-string"><span class="token string">`共</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>total<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">条`</span></span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>            queryParam<span class="token punctuation">:</span> <span class="token punctuation">{</span>                name<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>        pagesize<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>        pagenum<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>            catelist<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            AddcateVisible<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>            editcateVisible<span class="token punctuation">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>            cateinfo<span class="token punctuation">:</span><span class="token punctuation">{</span>                id<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>                name<span class="token punctuation">:</span><span class="token string">''</span><span class="token punctuation">,</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getcateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    methods<span class="token punctuation">:</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 查询分类</span>        <span class="token keyword">async</span> <span class="token function">getcateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span>res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'api/v1/category/'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>                params<span class="token punctuation">:</span><span class="token punctuation">{</span>                    size<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagesize<span class="token punctuation">,</span>                    page<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum<span class="token punctuation">,</span>                    <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>catelist <span class="token operator">=</span> res<span class="token punctuation">.</span>data            <span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>total        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 分页</span>        <span class="token function">handleTableChange</span><span class="token punctuation">(</span>pagination<span class="token punctuation">,</span> filters<span class="token punctuation">,</span> sorter<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">var</span> pager <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>pagination <span class="token punctuation">}</span>      pager<span class="token punctuation">.</span>current <span class="token operator">=</span> pagination<span class="token punctuation">.</span>current      pager<span class="token punctuation">.</span>pageSize <span class="token operator">=</span> pagination<span class="token punctuation">.</span>pageSize      <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagesize <span class="token operator">=</span> pagination<span class="token punctuation">.</span>pageSize      <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum <span class="token operator">=</span> pagination<span class="token punctuation">.</span>current      <span class="token keyword">if</span> <span class="token punctuation">(</span>pagination<span class="token punctuation">.</span>pageSize <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pagination<span class="token punctuation">.</span>pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum <span class="token operator">=</span> <span class="token number">1</span>        pager<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token number">1</span>      <span class="token punctuation">}</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>pagination <span class="token operator">=</span> pager      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getcateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment" spellcheck="true">// 删除分类</span>        <span class="token keyword">async</span> <span class="token function">delcate</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>          <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`api/admin/category/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/`</span></span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>queryParam<span class="token punctuation">.</span>pagenum <span class="token operator">=</span> <span class="token number">1</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getcateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token keyword">async</span> <span class="token function">AddcateOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"api/admin/category/"</span><span class="token punctuation">,</span><span class="token punctuation">{</span>                    <span class="token string">"name"</span><span class="token punctuation">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>cateinfo<span class="token punctuation">.</span>name<span class="token punctuation">,</span>                    <span class="token punctuation">}</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!=</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// 清空搜索框</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>addcateRef<span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// 关闭弹窗</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>AddcateVisible <span class="token operator">=</span> <span class="token boolean">false</span>        <span class="token ke